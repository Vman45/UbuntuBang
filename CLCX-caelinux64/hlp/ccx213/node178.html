<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">

<!--Converted with LaTeX2HTML 2002-2-1 (1.70)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>Sensitivity </TITLE>
<META NAME="description" CONTENT="Sensitivity ">
<META NAME="keywords" CONTENT="ccx">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META NAME="Generator" CONTENT="LaTeX2HTML v2002-2-1">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="ccx.css">

<LINK REL="next" HREF="node179.html">
<LINK REL="previous" HREF="node177.html">
<LINK REL="up" HREF="node156.html">
<LINK REL="next" HREF="node179.html">
</HEAD>

<BODY >
<!--Navigation Panel-->
<A NAME="tex2html3239"
  HREF="node179.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next"
 SRC="file:/usr/share/latex2html/icons/next.png"></A> 
<A NAME="tex2html3235"
  HREF="node156.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up"
 SRC="file:/usr/share/latex2html/icons/up.png"></A> 
<A NAME="tex2html3229"
  HREF="node177.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous"
 SRC="file:/usr/share/latex2html/icons/prev.png"></A> 
<A NAME="tex2html3237"
  HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents"
 SRC="file:/usr/share/latex2html/icons/contents.png"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html3240"
  HREF="node179.html">Green functions</A>
<B> Up:</B> <A NAME="tex2html3236"
  HREF="node156.html">Types of analysis</A>
<B> Previous:</B> <A NAME="tex2html3230"
  HREF="node177.html">Electromagnetism</A>
 &nbsp; <B>  <A NAME="tex2html3238"
  HREF="node1.html">Contents</A></B> 
<BR>
<BR>
<!--End of Navigation Panel-->

<H3><A NAME="SECTION000792200000000000000"></A><A NAME="sectionsensitivity"></A>
<BR>
Sensitivity 
</H3>

<P>
A sensitivity analysis calculates how a variable Y (called the objective
function) changes with some other variables X (called the design variables),
i.e. DY/DX. 

<P>
If X are the coordinates of some nodes, then the objective function usually
takes the form <B><IMG
 WIDTH="90" HEIGHT="32" ALIGN="MIDDLE" BORDER="0"
 SRC="img1411.png"
 ALT="$ Y(X,U(X))$"></B>, i.e. it is a direct function of the coordinates
and it is a direct function of the displacements, which are again a function
of the coordinates. One can write (vector- and matrix-denoting parentheses
have been omitted; it is assumed that the reader knows that <B><IMG
 WIDTH="17" HEIGHT="14" ALIGN="BOTTOM" BORDER="0"
 SRC="img438.png"
 ALT="$ U$"></B> and <B><IMG
 WIDTH="17" HEIGHT="14" ALIGN="BOTTOM" BORDER="0"
 SRC="img1412.png"
 ALT="$ F$"></B> are
vectors, <B><IMG
 WIDTH="19" HEIGHT="14" ALIGN="BOTTOM" BORDER="0"
 SRC="img280.png"
 ALT="$ K$"></B> and <B><IMG
 WIDTH="22" HEIGHT="14" ALIGN="BOTTOM" BORDER="0"
 SRC="img452.png"
 ALT="$ M$"></B> are matrices and that <B><IMG
 WIDTH="19" HEIGHT="14" ALIGN="BOTTOM" BORDER="0"
 SRC="img342.png"
 ALT="$ X$"></B> and <B><IMG
 WIDTH="17" HEIGHT="14" ALIGN="BOTTOM" BORDER="0"
 SRC="img1413.png"
 ALT="$ Y$"></B> are potentially vectors):

<P>
<P></P>
<DIV ALIGN="CENTER"><!-- MATH
 \begin{equation}
\frac{DY}{DX}=\frac{\partial Y}{\partial X} + \frac{\partial Y}{\partial U} \frac{\partial U}{\partial X}.
\end{equation}
 -->
<TABLE CELLPADDING="0" WIDTH="100%" ALIGN="CENTER">
<TR VALIGN="MIDDLE">
<TD NOWRAP ALIGN="CENTER"><IMG
 WIDTH="162" HEIGHT="52" ALIGN="MIDDLE" BORDER="0"
 SRC="img1414.png"
 ALT="$\displaystyle \frac{DY}{DX}=\frac{\partial Y}{\partial X} + \frac{\partial Y}{\partial U} \frac{\partial U}{\partial X}.$"></TD>
<TD NOWRAP WIDTH="10" ALIGN="RIGHT">
(422)</TD></TR>
</TABLE></DIV>
<BR CLEAR="ALL"><P></P>

<P>
The governing equation for static (linear and nonlinear) calculations is
<!-- MATH
 $F_{\text{int}}(X,U(X))=F_{\text{ext}}(X,U(X))$
 -->
<B><IMG
 WIDTH="225" HEIGHT="32" ALIGN="MIDDLE" BORDER="0"
 SRC="img1415.png"
 ALT="$ F_{\text{int}}(X,U(X))=F_{\text{ext}}(X,U(X))$"></B>, which leads to

<P>
<P></P>
<DIV ALIGN="CENTER"><!-- MATH
 \begin{equation}
\frac{\partial F_{\text{int}}}{\partial X} + \frac{\partial F_{\text{int}}}{\partial U} \frac{\partial U}{\partial X}=\frac{\partial F_{\text{ext}}}{\partial X} + \frac{\partial F_{\text{ext}}}{\partial U} \frac{\partial U}{\partial X}.
\end{equation}
 -->
<TABLE CELLPADDING="0" WIDTH="100%" ALIGN="CENTER">
<TR VALIGN="MIDDLE">
<TD NOWRAP ALIGN="CENTER"><IMG
 WIDTH="286" HEIGHT="52" ALIGN="MIDDLE" BORDER="0"
 SRC="img1416.png"
 ALT="$\displaystyle \frac{\partial F_{\text{int}}}{\partial X} + \frac{\partial F_{\t...
... X} + \frac{\partial F_{\text{ext}}}{\partial U} \frac{\partial U}{\partial X}.$"></TD>
<TD NOWRAP WIDTH="10" ALIGN="RIGHT">
(423)</TD></TR>
</TABLE></DIV>
<BR CLEAR="ALL"><P></P>

<P>
or

<P>
<P></P>
<DIV ALIGN="CENTER"><!-- MATH
 \begin{equation}
\frac{\partial U}{\partial X} = K^{-1} \left(  \frac{\partial F_{\text{ext}}}{\partial
    X}-\frac{\partial F_{\text{int}}}{\partial
    X} \right),
\end{equation}
 -->
<TABLE CELLPADDING="0" WIDTH="100%" ALIGN="CENTER">
<TR VALIGN="MIDDLE">
<TD NOWRAP ALIGN="CENTER"><IMG
 WIDTH="219" HEIGHT="54" ALIGN="MIDDLE" BORDER="0"
 SRC="img1417.png"
 ALT="$\displaystyle \frac{\partial U}{\partial X} = K^{-1} \left( \frac{\partial F_{\text{ext}}}{\partial X}-\frac{\partial F_{\text{int}}}{\partial X} \right),$"></TD>
<TD NOWRAP WIDTH="10" ALIGN="RIGHT">
(424)</TD></TR>
</TABLE></DIV>
<BR CLEAR="ALL"><P></P>

<P>
where

<P>
<P></P>
<DIV ALIGN="CENTER"><!-- MATH
 \begin{equation}
K=\frac{\partial F_{\text{int}}}{\partial
    U}-\frac{\partial F_{\text{ext}}}{\partial
    U}.
\end{equation}
 -->
<TABLE CELLPADDING="0" WIDTH="100%" ALIGN="CENTER">
<TR VALIGN="MIDDLE">
<TD NOWRAP ALIGN="CENTER"><IMG
 WIDTH="145" HEIGHT="52" ALIGN="MIDDLE" BORDER="0"
 SRC="img1418.png"
 ALT="$\displaystyle K=\frac{\partial F_{\text{int}}}{\partial U}-\frac{\partial F_{\text{ext}}}{\partial U}.$"></TD>
<TD NOWRAP WIDTH="10" ALIGN="RIGHT">
(425)</TD></TR>
</TABLE></DIV>
<BR CLEAR="ALL"><P></P>

<P>
Since for linear applications <!-- MATH
 $F_{\text{int}}(X,U(X))=K(X) \cdot U$
 -->
<B><IMG
 WIDTH="190" HEIGHT="32" ALIGN="MIDDLE" BORDER="0"
 SRC="img1419.png"
 ALT="$ F_{\text{int}}(X,U(X))=K(X) \cdot U$"></B>
and <!-- MATH
 $F_{\text{ext}}(X,U(X))=F(X)$
 -->
<B><IMG
 WIDTH="166" HEIGHT="32" ALIGN="MIDDLE" BORDER="0"
 SRC="img1420.png"
 ALT="$ F_{\text{ext}}(X,U(X))=F(X)$"></B>, the above
equations reduce in that case to

<P>
<P></P>
<DIV ALIGN="CENTER"><!-- MATH
 \begin{equation}
\frac{\partial K}{\partial X}  \cdot U + K \cdot \frac{\partial U}{\partial X}=\frac{\partial F}{\partial X},
\end{equation}
 -->
<TABLE CELLPADDING="0" WIDTH="100%" ALIGN="CENTER">
<TR VALIGN="MIDDLE">
<TD NOWRAP ALIGN="CENTER"><IMG
 WIDTH="183" HEIGHT="52" ALIGN="MIDDLE" BORDER="0"
 SRC="img1421.png"
 ALT="$\displaystyle \frac{\partial K}{\partial X} \cdot U + K \cdot \frac{\partial U}{\partial X}=\frac{\partial F}{\partial X},$"></TD>
<TD NOWRAP WIDTH="10" ALIGN="RIGHT">
(426)</TD></TR>
</TABLE></DIV>
<BR CLEAR="ALL"><P></P>

<P>
or

<P>
<P></P>
<DIV ALIGN="CENTER"><A NAME="displacementeq"></A><!-- MATH
 \begin{equation}
\frac{\partial U}{\partial X} = K^{-1} \left(  \frac{\partial F}{\partial
    X}-\frac{\partial K}{\partial X}  \cdot U \right).
\end{equation}
 -->
<TABLE CELLPADDING="0" WIDTH="100%" ALIGN="CENTER">
<TR VALIGN="MIDDLE">
<TD NOWRAP ALIGN="CENTER"><IMG
 WIDTH="217" HEIGHT="54" ALIGN="MIDDLE" BORDER="0"
 SRC="img1422.png"
 ALT="$\displaystyle \frac{\partial U}{\partial X} = K^{-1} \left( \frac{\partial F}{\partial X}-\frac{\partial K}{\partial X} \cdot U \right).$"></TD>
<TD NOWRAP WIDTH="10" ALIGN="RIGHT">
(427)</TD></TR>
</TABLE></DIV>
<BR CLEAR="ALL"><P></P>

<P>
Consequently one arives at the equation:

<P>
<P></P>
<DIV ALIGN="CENTER"><A NAME="sensitivityeq"></A><!-- MATH
 \begin{equation}
\frac{DY}{DX}=\frac{\partial Y}{\partial X} + \frac{\partial Y}{\partial U} K^{-1} \left(  \frac{\partial F}{\partial
    X}-\frac{\partial K}{\partial X}  \cdot U \right).
\end{equation}
 -->
<TABLE CELLPADDING="0" WIDTH="100%" ALIGN="CENTER">
<TR VALIGN="MIDDLE">
<TD NOWRAP ALIGN="CENTER"><IMG
 WIDTH="294" HEIGHT="54" ALIGN="MIDDLE" BORDER="0"
 SRC="img1423.png"
 ALT="$\displaystyle \frac{DY}{DX}=\frac{\partial Y}{\partial X} + \frac{\partial Y}{\...
...t( \frac{\partial F}{\partial X}-\frac{\partial K}{\partial X} \cdot U \right).$"></TD>
<TD NOWRAP WIDTH="10" ALIGN="RIGHT">
(428)</TD></TR>
</TABLE></DIV>
<BR CLEAR="ALL"><P></P>

<P>
For the speed-up of the calculations it is important to perform the
calculation of the term <!-- MATH
 $\frac{\partial K}{\partial X}  \cdot U$
 -->
<B><IMG
 WIDTH="51" HEIGHT="36" ALIGN="MIDDLE" BORDER="0"
 SRC="img1424.png"
 ALT="$ \frac{\partial K}{\partial X} \cdot U$"></B> on element
level and to calculate the term <!-- MATH
 $\frac{\partial Y}{\partial U} K^{-1}$
 -->
<B><IMG
 WIDTH="58" HEIGHT="36" ALIGN="MIDDLE" BORDER="0"
 SRC="img1425.png"
 ALT="$ \frac{\partial Y}{\partial U} K^{-1}$"></B> before
multiplying with the last term in brackets. Furhermore,  <!-- MATH
 $\frac{\partial
Y}{\partial U} K^{-1}$
 -->
<B><IMG
 WIDTH="58" HEIGHT="36" ALIGN="MIDDLE" BORDER="0"
 SRC="img1425.png"
 ALT="$ \frac{\partial Y}{\partial U} K^{-1}$"></B> should be calculated by solving an equation system
and not by inverting <B><IMG
 WIDTH="19" HEIGHT="14" ALIGN="BOTTOM" BORDER="0"
 SRC="img280.png"
 ALT="$ K$"></B>.

<P>
For special objective functions this relationship is further simplified:

<UL>
<LI>if <B><IMG
 WIDTH="17" HEIGHT="14" ALIGN="BOTTOM" BORDER="0"
 SRC="img1413.png"
 ALT="$ Y$"></B> is the mass <!-- MATH
 $\frac{\partial Y}{\partial U}=0$
 -->
<B><IMG
 WIDTH="55" HEIGHT="36" ALIGN="MIDDLE" BORDER="0"
 SRC="img1426.png"
 ALT="$ \frac{\partial Y}{\partial U}=0$"></B>.
</LI>
<LI>if <B><IMG
 WIDTH="17" HEIGHT="14" ALIGN="BOTTOM" BORDER="0"
 SRC="img1413.png"
 ALT="$ Y$"></B> is the shape energy  <!-- MATH
 $\frac{\partial Y}{\partial U} K^{-1}=U$
 -->
<B><IMG
 WIDTH="92" HEIGHT="36" ALIGN="MIDDLE" BORDER="0"
 SRC="img1427.png"
 ALT="$ \frac{\partial Y}{\partial U} K^{-1}=U$"></B>.
</LI>
<LI>if <B><IMG
 WIDTH="17" HEIGHT="14" ALIGN="BOTTOM" BORDER="0"
 SRC="img1413.png"
 ALT="$ Y$"></B> are the displacements Equation (<A HREF="#displacementeq">427</A>) applies
  directly
</LI>
</UL>

<P>
For eigenfrequencies as objective function one starts from the eigenvalue
equation:

<P>
<P></P>
<DIV ALIGN="CENTER"><!-- MATH
 \begin{equation}
K \cdot U_i = \lambda_i M \cdot U_i,
\end{equation}
 -->
<TABLE CELLPADDING="0" WIDTH="100%" ALIGN="CENTER">
<TR VALIGN="MIDDLE">
<TD NOWRAP ALIGN="CENTER"><IMG
 WIDTH="132" HEIGHT="30" ALIGN="MIDDLE" BORDER="0"
 SRC="img1428.png"
 ALT="$\displaystyle K \cdot U_i = \lambda_i M \cdot U_i,$"></TD>
<TD NOWRAP WIDTH="10" ALIGN="RIGHT">
(429)</TD></TR>
</TABLE></DIV>
<BR CLEAR="ALL"><P></P>

<P>
from which one gets:

<P>
<P></P>
<DIV ALIGN="CENTER"><!-- MATH
 \begin{equation}
\frac{\partial \lambda_i}{\partial X} M \cdot U_i = (K - \lambda_i M) \cdot
\frac{\partial U_i}{\partial X} + \left( \frac{\partial
    K}{\partial X} - \lambda_i \frac{\partial M}{\partial X} \right) \cdot U_i.
\end{equation}
 -->
<TABLE CELLPADDING="0" WIDTH="100%" ALIGN="CENTER">
<TR VALIGN="MIDDLE">
<TD NOWRAP ALIGN="CENTER"><IMG
 WIDTH="384" HEIGHT="54" ALIGN="MIDDLE" BORDER="0"
 SRC="img1429.png"
 ALT="$\displaystyle \frac{\partial \lambda_i}{\partial X} M \cdot U_i = (K - \lambda_...
...ial K}{\partial X} - \lambda_i \frac{\partial M}{\partial X} \right) \cdot U_i.$"></TD>
<TD NOWRAP WIDTH="10" ALIGN="RIGHT">
(430)</TD></TR>
</TABLE></DIV>
<BR CLEAR="ALL"><P></P>

<P>
Premultiplying with <B><IMG
 WIDTH="27" HEIGHT="35" ALIGN="MIDDLE" BORDER="0"
 SRC="img1430.png"
 ALT="$ U_i^T$"></B> and taking the eigenvalue equation and the normalization of the eigenvectors
w.r.t. <B><IMG
 WIDTH="22" HEIGHT="14" ALIGN="BOTTOM" BORDER="0"
 SRC="img452.png"
 ALT="$ M$"></B> into account leads to

<P>
<P></P>
<DIV ALIGN="CENTER"><A NAME="sensfreq1"></A><!-- MATH
 \begin{equation}
\frac{\partial \lambda_i}{\partial X}  = U_i^T \cdot \left( \frac{\partial
    K}{\partial X} - \lambda_i \frac{\partial M}{\partial X} \right) \cdot U_i.
\end{equation}
 -->
<TABLE CELLPADDING="0" WIDTH="100%" ALIGN="CENTER">
<TR VALIGN="MIDDLE">
<TD NOWRAP ALIGN="CENTER"><IMG
 WIDTH="235" HEIGHT="54" ALIGN="MIDDLE" BORDER="0"
 SRC="img1431.png"
 ALT="$\displaystyle \frac{\partial \lambda_i}{\partial X} = U_i^T \cdot \left( \frac{...
...ial K}{\partial X} - \lambda_i \frac{\partial M}{\partial X} \right) \cdot U_i.$"></TD>
<TD NOWRAP WIDTH="10" ALIGN="RIGHT">
(431)</TD></TR>
</TABLE></DIV>
<BR CLEAR="ALL"><P></P>

<P>
Notice
that this is the sensitivity of the eigenvalues, not of the eigenfrequencies
(which are the square roots of the eigenvalues). This is exactly how it is
implemented in CalculiX: you get in the output the sensitivity of the
eigenvalues. 

<P>
Subsequently, one
can derive the eigenvalue equation to obtain the derivatives of the
eigenvectors:

<P>
<P></P>
<DIV ALIGN="CENTER"><A NAME="sensfreq2"></A><!-- MATH
 \begin{equation}
(K - \lambda_i M) \frac{\partial U_i}{\partial X} = - \left( \frac{\partial
    K}{\partial X} - \lambda_i \frac{\partial M}{\partial X} - \frac{\partial \lambda_i}{\partial X} M \right) \cdot U_i.
\end{equation}
 -->
<TABLE CELLPADDING="0" WIDTH="100%" ALIGN="CENTER">
<TR VALIGN="MIDDLE">
<TD NOWRAP ALIGN="CENTER"><IMG
 WIDTH="360" HEIGHT="54" ALIGN="MIDDLE" BORDER="0"
 SRC="img1432.png"
 ALT="$\displaystyle (K - \lambda_i M) \frac{\partial U_i}{\partial X} = - \left( \fra...
...ial M}{\partial X} - \frac{\partial \lambda_i}{\partial X} M \right) \cdot U_i.$"></TD>
<TD NOWRAP WIDTH="10" ALIGN="RIGHT">
(432)</TD></TR>
</TABLE></DIV>
<BR CLEAR="ALL"><P></P>

<P>
If X is the orientation in some or all of the elements, the term
<!-- MATH
 $\frac{\partial Y}{\partial X}$
 -->
<B><IMG
 WIDTH="27" HEIGHT="36" ALIGN="MIDDLE" BORDER="0"
 SRC="img1433.png"
 ALT="$ \frac{\partial Y}{\partial X}$"></B> is in addition zero in the above equations.

<P>
In CalculiX, Y is defined with the keyword <A HREF="node288.html#objective">*OBJECTIVE</A>, X
is defined with the keyword <A HREF="node237.html#designvariables">DESIGNVARIABLES</A> and a
sensitivity analysis is introduced with the procedure card
<A HREF="node300.html#sensitivity">*SENSITIVITY</A>. 

<P>
If the parameter NLGEOM is not used on the *SENSITIVITY card, the calculation
of <!-- MATH
 $\frac{\partial K}{\partial X}$
 -->
<B><IMG
 WIDTH="27" HEIGHT="36" ALIGN="MIDDLE" BORDER="0"
 SRC="img1434.png"
 ALT="$ \frac{\partial K}{\partial X}$"></B> does not contain the large deformation and
stress stiffness, else it does. Similarly, without NLGEOM  <!-- MATH
 $\frac{\partial
Y}{\partial X}$
 -->
<B><IMG
 WIDTH="27" HEIGHT="36" ALIGN="MIDDLE" BORDER="0"
 SRC="img1433.png"
 ALT="$ \frac{\partial Y}{\partial X}$"></B> is calculated based on the linear strains, else the
quadratic terms are taken into account.

<P>
If the objective function is the mass,
the shapeenergy or the displacements a <A HREF="node306.html#static">*STATIC</A> step
must
have been performed. The displacements <B><IMG
 WIDTH="17" HEIGHT="14" ALIGN="BOTTOM" BORDER="0"
 SRC="img438.png"
 ALT="$ U$"></B> and the stiffness matrix <B><IMG
 WIDTH="19" HEIGHT="14" ALIGN="BOTTOM" BORDER="0"
 SRC="img280.png"
 ALT="$ K$"></B> from
this step are taken for <B><IMG
 WIDTH="19" HEIGHT="14" ALIGN="BOTTOM" BORDER="0"
 SRC="img280.png"
 ALT="$ K$"></B> and <B><IMG
 WIDTH="17" HEIGHT="14" ALIGN="BOTTOM" BORDER="0"
 SRC="img438.png"
 ALT="$ U$"></B> in 
Equation (<A HREF="#sensitivityeq">428</A>) (in the presence of a subsequent sensitivity
step <B><IMG
 WIDTH="19" HEIGHT="14" ALIGN="BOTTOM" BORDER="0"
 SRC="img280.png"
 ALT="$ K$"></B> is stored automatically in a file with the name jobname.stm). If the static step was calculated with NLGEOM,
so should the sensitivity step in order to be consistent. So the procedure
cards should run like:

<P>
<PRE>
*STEP
*STATIC
...
*STEP
*SENSITIVITY
...
</PRE>

<P>
or

<P>
<PRE>
*STEP,NLGEOM
*STATIC
...
*STEP,NLGEOM
*SENSITIVITY
...
</PRE>

<P>
If the objective functions are the eigenfrequencies (which include the
eigenmodes),  a  <A HREF="node258.html#frequency">*FREQUENCY</A> step must have been
performed with STORAGE=YES. This frequency step may be a perturbation step, in which case it is
preceded by a static step. The displacements <B><IMG
 WIDTH="17" HEIGHT="14" ALIGN="BOTTOM" BORDER="0"
 SRC="img438.png"
 ALT="$ U$"></B>, the stiffness matrix <B><IMG
 WIDTH="19" HEIGHT="14" ALIGN="BOTTOM" BORDER="0"
 SRC="img280.png"
 ALT="$ K$"></B> and
the mass matrix <B><IMG
 WIDTH="22" HEIGHT="14" ALIGN="BOTTOM" BORDER="0"
 SRC="img452.png"
 ALT="$ M$"></B> for equations (<A HREF="#sensfreq1">431</A>) and (<A HREF="#sensfreq2">432</A>) are
taken from the frequency step. If the frequency step is performed as a
perturbation step, the sensitivity step should be performed with NLGEOM, else
it is not necessary. So the procedure cards should run like:

<P>
<PRE>
*STEP
*FREQUENCY,STORAGE=YES
...
*STEP
*SENSITIVITY
...
</PRE>

<P>
or

<P>
<PRE>
*STEP
*STATIC
...
*STEP,PERTURBATION
*FREQUENCY,STORAGE=YES
...
*STEP,NLGEOM
*SENSITIVITY
...
</PRE>

<P>
or

<P>
<PRE>
*STEP,NLGEOM
*STATIC
...
*STEP,PERTURBATION
*FREQUENCY,STORAGE=YES
...
*STEP,NLGEOM
*SENSITIVITY
...
</PRE>

<P>
(a perturbation frequency step only makes sense with a preceding static step).

<P>
The output of a sensitivity calculation is stored as follows (frd-output only
if the SEN output request was specified underneath a *NODE FILE card):

<P>
For TYPE=COORDINATE design variables the results of the target functions MASS,
SHAPE ENERGY, EIGENFREQUENCY and DISPLACEMENT (i.e. the sum of the squares of
the displacements in all objective nodes) are stored in the .frd-file and can
be visualized using CalculiX GraphiX.

<P>
For TYPE=ORIENTATION design variables the eigenfrequency sensitivity is stored
in the .dat file whereas the displacement sensitivity (i.e. the derivative of
the displacements in all nodes w.r.t. the orientation) is stored in the
.frd-file. The order of the design variables is listed in the .dat-file. All
orientations defined by *ORIENTATION cards are varied, each orientation is
defined by 3 independent variables. So for n *ORIENTATION cards there are 3n
design variables. The sensitivity of the mass w.r.t. the orientation is zero.

<P>
Finally, it is important to know that a sensitivity analysis in CalculiX only
works for true 3D-elements (no shells, beams, plane stress, etc...).

<P>
<HR>
<!--Navigation Panel-->
<A NAME="tex2html3239"
  HREF="node179.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next"
 SRC="file:/usr/share/latex2html/icons/next.png"></A> 
<A NAME="tex2html3235"
  HREF="node156.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up"
 SRC="file:/usr/share/latex2html/icons/up.png"></A> 
<A NAME="tex2html3229"
  HREF="node177.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous"
 SRC="file:/usr/share/latex2html/icons/prev.png"></A> 
<A NAME="tex2html3237"
  HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents"
 SRC="file:/usr/share/latex2html/icons/contents.png"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html3240"
  HREF="node179.html">Green functions</A>
<B> Up:</B> <A NAME="tex2html3236"
  HREF="node156.html">Types of analysis</A>
<B> Previous:</B> <A NAME="tex2html3230"
  HREF="node177.html">Electromagnetism</A>
 &nbsp; <B>  <A NAME="tex2html3238"
  HREF="node1.html">Contents</A></B> 
<!--End of Navigation Panel-->
<ADDRESS>
guido dhondt
2017-10-08
</ADDRESS>
</BODY>
</HTML>
